class(totalCount1)
# totalCount
totalCount1 <- exhibitionList[[1]]$sourceWebName == "全國藝文活動資訊系統"
totalCount2 <- sum(totalCount1)
class(totalCount2)
# totalCount
totalCount1 <- exhibitionList[[1]]$sourceWebName == "全國藝文活動資訊系統"
totalCount2 <- sum(totalCount1)
totalCount2
View(exhibitionList)
# totalCount
totalCount1 <- exhibitionList[["sourceWebName"]] == "全國藝文活動資訊系統"
# totalCount
totalCount1 <- exhibitionList[["sourceWebName"]] == "全國藝文活動資訊系統"
totalCount2 <- sum(totalCount1)
# totalCount
totalCount1 <- exhibitionList[["sourceWebName"]] == "全國藝文活動資訊系統"
totalCount2 <- sum(totalCount1)
totalCount2
# totalCount
map_dfc(exhibitionList,sourceWebName=="全國藝文活動資訊系統") -> totalCount
# totalCount
map(exhibitionList,sourceWebName=="全國藝文活動資訊系統") -> totalCount
# totalCount
length(exhibitionList)
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[c(1:a)][["sourceWebName"]] == "全國藝文活動資訊系統"
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[c(1:a)][["sourceWebName"]] == "全國藝文活動資訊系統"
totalCount2 <- sum(totalCount1)
totalCount2
# totalCount
length(exhibitionList)
totalCount1 <- exhibitionList[c(1:a)][["sourceWebName"]] == "全國藝文活動資訊系統"
totalCount2 <- sum(totalCount1)
totalCount2
# totalCount
length(exhibitionList)
totalCount1 <- exhibitionList[c(1:1517)][["sourceWebName"]] == "全國藝文活動資訊系統"
totalCount2 <- sum(totalCount1)
totalCount2
# totalCount
length(exhibitionList)
totalCount1 <- exhibitionList[c(1:1517)][["sourceWebName"]] == "全國藝文活動資訊系統"
totalCount2 <- sum(totalCount1)
totalCount2
# totalCount
length(exhibitionList)
totalCount1 <- exhibitionList[c(1:1517)][["sourceWebName"]] == '全國藝文活動資訊系統'
totalCount2 <- sum(totalCount1)
totalCount2
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[c(1:a)]["sourceWebName"] == '全國藝文活動資訊系統'
totalCount2 <- sum(totalCount1)
totalCount2
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[c(1:a)][["sourceWebName"]] == '全國藝文活動資訊系統'
totalCount2 <- sum(totalCount1)
totalCount1
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[c(1:a)]
totalCount2 <- sum(totalCount1)
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[c(1:a)]
totalCount1
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[c(1:a)][["sourceWebName"]][[1]] == "全國藝文活動資訊系統"
totalCount2 <- sum(totalCount1)
totalCount2
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[c(1:a)]["sourceWebName"][1] == "全國藝文活動資訊系統"
totalCount2 <- sum(totalCount1)
totalCount2
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[c(1:a)]
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[c(1:a)]
totalCount1
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[c(1:a)]$sourceWebName
totalCount1
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[c(1:a)][["sourceWebName"]]
totalCount1
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[[1]][["sourceWebName"]] == "全國藝文活動資訊系統"
totalCount1
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[c(1:a)][["sourceWebName"]] == "全國藝文活動資訊系統"
totalCount1
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[,c(1:a)][["sourceWebName"]] == "全國藝文活動資訊系統"
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[c(1:a),][["sourceWebName"]] == "全國藝文活動資訊系統"
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[c(1:a)][["sourceWebName"]] == "全國藝文活動資訊系統"
totalCount1
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[2][["sourceWebName"]] == "全國藝文活動資訊系統"
totalCount1
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[[2]][["sourceWebName"]] == "全國藝文活動資訊系統"
totalCount1
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[[1,2]][["sourceWebName"]] == "全國藝文活動資訊系統"
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[[c(1:a)]][["sourceWebName"]] == "全國藝文活動資訊系統"
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[[c(1:1517)]][["sourceWebName"]] == "全國藝文活動資訊系統"
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[][["sourceWebName"]] == "全國藝文活動資訊系統"
totalCount2 <- sum(totalCount1)
totalCount <- as.numeric(totalCount2)
totalCount
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList[??????????][["sourceWebName"]] == "全國藝文活動資訊系統"
#  dataframe_show_info
dataframe_show_info <- function(exhibitionInput){
df_oneShow <- data.frame(
title=c(exhibitionInput[["title"]]),
time=c(exhibitionInput[["showInfo"]][[1]][["time"]]),
location=c(exhibitionInput[["showInfo"]][[1]][["location"]]),
locationName=c(exhibitionInput[["showInfo"]][[1]][["locationName"]]),
price=c(exhibitionInput[["showInfo"]][[1]][["price"]]),
endTime=c(exhibitionInput[["showInfo"]][[1]][["endTime"]]),
sourceWebName=c(exhibitionInput[["sourceWebName"]]),
stringsAsFactors=F
)
return(df_oneShow)
}
dataframe_show_info(exhibitionList[[5]])
View(exhibitionList)
# totalCount
length(exhibitionList) -> a
totalCount1 <- exhibitionList$sourceWebName == "全國藝文活動資訊系統"
totalCount2 <- sum(totalCount1)
totalCount <- as.numeric(totalCount2)
totalCount
# totalCount
length(exhibitionList) -> a
totalCount1 <- df_allShows$sourceWebName == "全國藝文活動資訊系統"
totalCount2 <- sum(totalCount1)
totalCount <- as.numeric(totalCount2)
totalCount
library(lubridate); library(stringr); library(purrr); library(readr)
library(readr)
finStatement <- read_csv("http://mopsfin.twse.com.tw/opendata/t187ap06_O_ci.csv")
# loss1Companies
finStatement$`營業利益（損失）` < 0 -> loss1Companies1
loss1Companies <- finStatement$公司名稱[loss1Companies1]
loss1Companies <- as.character(loss1Companies)
loss1Companies
# loss2Companies
loss2Companies1 <- finStatement$`基本每股盈餘（元）` < 0
loss2Companies <- finStatement$公司名稱[loss2Companies1]
loss2Companies <- as.character(loss2Companies)
loss2Companies
# only1LossCompanies
lossstep1 <- finStatement$`營業利益（損失）`>0 & finStatement$`基本每股盈餘（元）`<0
lossstep2 <- finStatement$`營業利益（損失）`<0 & finStatement$`基本每股盈餘（元）`>0
only1LossCompanies1 <- lossstep1 | lossstep2
only1LossCompanies <- finStatement$公司名稱[only1LossCompanies1]
only1LossCompanies <- as.character(only1LossCompanies)
only1LossCompanies
# only1LossCompanies
lossstep1 <- finStatement$`營業利益（損失）`>0 & finStatement$`基本每股盈餘（元）`<0
lossstep2 <- finStatement$`營業利益（損失）`<0 & finStatement$`基本每股盈餘（元）`>0
only1LossCompanies1 <- lossstep1 | lossstep2
only1LossCompanies <- finStatement$公司名稱[only1LossCompanies1]
only1LossCompanies <- as.character(only1LossCompanies)
only1LossCompanies
# subsample
subsample1 <- finStatement$公司名稱[only1LossCompanies1,]
# subsample
subsample1 <- finStatement$公司名稱[only1LossCompanies1]
subsample1
# subsample
subsample1 <- [finStatement$公司名稱,only1LossCompanies1]
# subsample
subsample1 <- [finStatement$公司名稱,only1LossCompanies1 == T]
# subsample
subsample1 <- [finStatement$公司名稱,"only1LossCompanies1 == T"]
# subsample
subsample1 <- [finStatement$公司名稱,"only1LossCompanies1" == T]
# subsample
subsample1 <- [finStatement$公司名稱,only1LossCompanies1 == T]
# subsample
subsample1 <- ["finStatement$公司名稱",only1LossCompanies1 == T]
# subsample
subsample1 <- [only1LossCompanies1,]
# subsample
subsample1 <- finStatement[only1LossCompanies1,]
subsample1
# subsample
subsample <- finStatement[only1LossCompanies1,]
subsample
# subsample
subsample <- finStatement[only1LossCompanies1,]
class(subsample)
subsample
library(readr)
finStatement <- read_csv("http://mopsfin.twse.com.tw/opendata/t187ap06_O_ci.csv")
# loss1Companies
finStatement$`營業利益（損失）` < 0 -> loss1Companies1
loss1Companies <- finStatement$公司名稱[loss1Companies1]
loss1Companies <- as.character(loss1Companies)
class(loss1Companies)
loss1Companies
# loss2Companies
loss2Companies1 <- finStatement$`基本每股盈餘（元）` < 0
loss2Companies <- finStatement$公司名稱[loss2Companies1]
loss2Companies <- as.character(loss2Companies)
class(loss2Companies)
loss2Companies
# only1LossCompanies
lossstep1 <- finStatement$`營業利益（損失）`>0 & finStatement$`基本每股盈餘（元）`<0
lossstep2 <- finStatement$`營業利益（損失）`<0 & finStatement$`基本每股盈餘（元）`>0
only1LossCompanies1 <- lossstep1 | lossstep2
only1LossCompanies <- finStatement$公司名稱[only1LossCompanies1]
only1LossCompanies <- as.character(only1LossCompanies)
class(only1LossCompanies)
only1LossCompanies
# subsample
subsample <- finStatement[only1LossCompanies1,]
class(subsample)
subsample
library(httr)
exhibitionList <- content(GET("https://cloud.culture.tw/frontsite/trans/SearchShowAction.do?method=doFindTypeJ&category=6"))
str(exhibitionList[[1]])
# numExhibitions
length(exhibitionList) -> numExhibitions
numExhibitions
# df_oneShow
df_oneShow <- data.frame(
title=c(exhibitionList[[1]][["title"]]),
time=c(exhibitionList[[1]][["showInfo"]][[1]][["time"]]),
location=c(exhibitionList[[1]][["showInfo"]][[1]][["location"]]),
locationName=c(exhibitionList[[1]][["showInfo"]][[1]][["locationName"]]),
price=c(exhibitionList[[1]][["showInfo"]][[1]][["price"]]),
endTime=c(exhibitionList[[1]][["showInfo"]][[1]][["endTime"]]),
sourceWebName=c(exhibitionList[[1]][["sourceWebName"]]),
stringsAsFactors=F
)
class(df_oneShow)
df_oneShow
#  dataframe_show_info
dataframe_show_info <- function(exhibitionInput){
df_oneShow <- data.frame(
title=c(exhibitionInput[["title"]]),
time=c(exhibitionInput[["showInfo"]][[1]][["time"]]),
location=c(exhibitionInput[["showInfo"]][[1]][["location"]]),
locationName=c(exhibitionInput[["showInfo"]][[1]][["locationName"]]),
price=c(exhibitionInput[["showInfo"]][[1]][["price"]]),
endTime=c(exhibitionInput[["showInfo"]][[1]][["endTime"]]),
sourceWebName=c(exhibitionInput[["sourceWebName"]]),
stringsAsFactors=F
)
return(df_oneShow)
}
class(dataframe_show_info)
dataframe_show_info
library(purrr)
map_dfr(exhibitionList,dataframe_show_info) -> df_allShows
# levels(df_allShows$sourceWebName)
df_allShows$sourceWebName <- as.factor(df_allShows$sourceWebName)
class(df_allShows$sourceWebName)
levels(df_allShows$sourceWebName)
# totalCount
length(exhibitionList) -> a
totalCount1 <- df_allShows$sourceWebName == "全國藝文活動資訊系統"
totalCount2 <- sum(totalCount1)
totalCount <- as.numeric(totalCount2)
class(totalCount)
totalCount
# loss1Companies
finStatement$`營業利益（損失）` < 0 -> loss1Companies1
loss1Companies <- finStatement$公司名稱[loss1Companies1]
loss1Companies <- as.character(loss1Companies)
class(loss1Companies)
loss1Companies
# loss2Companies
loss2Companies1 <- finStatement$`基本每股盈餘（元）` < 0
loss2Companies <- finStatement$公司名稱[loss2Companies1]
loss2Companies <- as.character(loss2Companies)
class(loss2Companies)
loss2Companies
# only1LossCompanies
lossstep1 <- finStatement$`營業利益（損失）`>0 & finStatement$`基本每股盈餘（元）`<0
lossstep2 <- finStatement$`營業利益（損失）`<0 & finStatement$`基本每股盈餘（元）`>0
only1LossCompanies1 <- lossstep1 | lossstep2
only1LossCompanies <- finStatement$公司名稱[only1LossCompanies1]
only1LossCompanies <- as.character(only1LossCompanies)
class(only1LossCompanies)
only1LossCompanies
# numExhibitions
length(exhibitionList) -> numExhibitions
numExhibitions
library(purrr)
map_dfr(exhibitionList,dataframe_show_info) -> df_allShows
# levels(df_allShows$sourceWebName)
df_allShows$sourceWebName <- as.factor(df_allShows$sourceWebName)
class(df_allShows$sourceWebName)
levels(df_allShows$sourceWebName)
# totalCount
length(exhibitionList) -> a
totalCount1 <- df_allShows$sourceWebName == "全國藝文活動資訊系統"
totalCount2 <- sum(totalCount1)
totalCount <- as.numeric(totalCount2)
class(totalCount)
totalCount
library(httr)
exhibitionList <- content(GET("https://cloud.culture.tw/frontsite/trans/SearchShowAction.do?method=doFindTypeJ&category=6"))
str(exhibitionList[[1]])
# numExhibitions
length(exhibitionList) -> numExhibitions
numExhibitions
# df_oneShow
df_oneShow <- data.frame(
title=exhibitionList[[1]][["title"]],
time=c(exhibitionList[[1]][["showInfo"]][[1]][["time"]]),
location=c(exhibitionList[[1]][["showInfo"]][[1]][["location"]]),
locationName=c(exhibitionList[[1]][["showInfo"]][[1]][["locationName"]]),
price=c(exhibitionList[[1]][["showInfo"]][[1]][["price"]]),
endTime=c(exhibitionList[[1]][["showInfo"]][[1]][["endTime"]]),
sourceWebName=c(exhibitionList[[1]][["sourceWebName"]]),
stringsAsFactors=F
)
class(df_oneShow)
df_oneShow
# df_oneShow
df_oneShow <- data.frame(
title=exhibitionList[[1]][["title"]],
time=exhibitionList[[1]][["showInfo"]][[1]][["time"]],
location=exhibitionList[[1]][["showInfo"]][[1]][["location"]],
locationName=exhibitionList[[1]][["showInfo"]][[1]][["locationName"]],
price=exhibitionList[[1]][["showInfo"]][[1]][["price"]],
endTime=exhibitionList[[1]][["showInfo"]][[1]][["endTime"]],
sourceWebName=exhibitionList[[1]][["sourceWebName"]],
stringsAsFactors=F
)
class(df_oneShow)
df_oneShow
#  dataframe_show_info
dataframe_show_info <- function(exhibitionInput){
df_oneShow <- data.frame(
title=exhibitionInput[["title"]],
time=exhibitionInput[["showInfo"]][[1]][["time"]],
location=exhibitionInput[["showInfo"]][[1]][["location"]],
locationName=exhibitionInput[["showInfo"]][[1]][["locationName"]],
price=exhibitionInput[["showInfo"]][[1]][["price"]],
endTime=exhibitionInput[["showInfo"]][[1]][["endTime"]],
sourceWebName=exhibitionInput[["sourceWebName"]],
stringsAsFactors=F
)
return(df_oneShow)
}
class(dataframe_show_info)
dataframe_show_info
library(purrr)
map_dfr(exhibitionList,dataframe_show_info) -> df_allShows
# levels(df_allShows$sourceWebName)
df_allShows$sourceWebName <- as.factor(df_allShows$sourceWebName)
class(df_allShows$sourceWebName)
levels(df_allShows$sourceWebName)
# totalCount
totalCount1 <- df_allShows$sourceWebName == "全國藝文活動資訊系統"
totalCount1 <- as.numeric(totalCount1)
totalCount <- sum(totalCount1)
class(totalCount)
totalCount
# loss1Companies
finStatement$`營業利益（損失）` < 0 -> loss1Companies1
loss1Companies <- finStatement$公司名稱[loss1Companies1]
loss1Companies <- as.character(loss1Companies)
class(loss1Companies)
loss1Companies
# loss2Companies
loss2Companies1 <- finStatement$`基本每股盈餘（元）` < 0
loss2Companies <- finStatement$公司名稱[loss2Companies1]
loss2Companies <- as.character(loss2Companies)
class(loss2Companies)
loss2Companies
# only1LossCompanies
lossstep1 <- finStatement$`營業利益（損失）`>0 & finStatement$`基本每股盈餘（元）`<0
lossstep2 <- finStatement$`營業利益（損失）`<0 & finStatement$`基本每股盈餘（元）`>0
only1LossCompanies1 <- lossstep1 | lossstep2
only1LossCompanies <- finStatement$公司名稱[only1LossCompanies1]
only1LossCompanies <- as.character(only1LossCompanies)
class(only1LossCompanies)
only1LossCompanies
# subsample
subsample <- finStatement[only1LossCompanies1,]
class(subsample)
subsample
# loss1Companies
finStatement$`營業利益（損失）` < 0 -> loss1Companies1
loss1Companies <- finStatement$公司名稱[loss1Companies1]
loss1Companies <- as.character(loss1Companies)
class(loss1Companies)
loss1Companies
# loss2Companies
loss2Companies1 <- finStatement$`基本每股盈餘（元）` < 0
loss2Companies <- finStatement$公司名稱[loss2Companies1]
loss2Companies <- as.character(loss2Companies)
class(loss2Companies)
loss2Companies
# only1LossCompanies
lossstep1 <- finStatement$`營業利益（損失）`>0 & finStatement$`基本每股盈餘（元）`<0
lossstep2 <- finStatement$`營業利益（損失）`<0 & finStatement$`基本每股盈餘（元）`>0
only1LossCompanies1 <- lossstep1 | lossstep2
only1LossCompanies <- finStatement$公司名稱[only1LossCompanies1]
only1LossCompanies <- as.character(only1LossCompanies)
class(only1LossCompanies)
only1LossCompanies
# subsample
subsample <- finStatement[only1LossCompanies1,]
class(subsample)
subsample
library(httr)
exhibitionList <- content(GET("https://cloud.culture.tw/frontsite/trans/SearchShowAction.do?method=doFindTypeJ&category=6"))
str(exhibitionList[[1]])
# numExhibitions
length(exhibitionList) -> numExhibitions
numExhibitions
# df_oneShow
df_oneShow <- data.frame(
title=exhibitionList[[1]][["title"]],
time=exhibitionList[[1]][["showInfo"]][[1]][["time"]],
location=exhibitionList[[1]][["showInfo"]][[1]][["location"]],
locationName=exhibitionList[[1]][["showInfo"]][[1]][["locationName"]],
price=exhibitionList[[1]][["showInfo"]][[1]][["price"]],
endTime=exhibitionList[[1]][["showInfo"]][[1]][["endTime"]],
sourceWebName=exhibitionList[[1]][["sourceWebName"]],
stringsAsFactors=F
)
class(df_oneShow)
df_oneShow
# df_oneShow
df_oneShow <- data.frame(
title=exhibitionList[[1]][["title"]],
time=exhibitionList[[1]][["showInfo"]][[1]][["time"]],
location=exhibitionList[[1]][["showInfo"]][[1]][["location"]],
locationName=exhibitionList[[1]][["showInfo"]][[1]][["locationName"]],
price=exhibitionList[[1]][["showInfo"]][[1]][["price"]],
endTime=exhibitionList[[1]][["showInfo"]][[1]][["endTime"]],
sourceWebName=exhibitionList[[1]][["sourceWebName"]],
stringsAsFactors=F
)
class(df_oneShow)
df_oneShow
#  dataframe_show_info
dataframe_show_info <- function(exhibitionInput){
df_oneShow <- data.frame(
title=exhibitionInput[["title"]],
time=exhibitionInput[["showInfo"]][[1]][["time"]],
location=exhibitionInput[["showInfo"]][[1]][["location"]],
locationName=exhibitionInput[["showInfo"]][[1]][["locationName"]],
price=exhibitionInput[["showInfo"]][[1]][["price"]],
endTime=exhibitionInput[["showInfo"]][[1]][["endTime"]],
sourceWebName=exhibitionInput[["sourceWebName"]],
stringsAsFactors=F
)
return(df_oneShow)
}
class(dataframe_show_info)
dataframe_show_info
library(purrr)
map_dfr(exhibitionList,dataframe_show_info) -> df_allShows
# levels(df_allShows$sourceWebName)
df_allShows$sourceWebName <- as.factor(df_allShows$sourceWebName)
class(df_allShows$sourceWebName)
levels(df_allShows$sourceWebName)
# levels(df_allShows$sourceWebName)
df_allShows$sourceWebName <- as.factor(df_allShows$sourceWebName)
class(df_allShows$sourceWebName)
levels(df_allShows$sourceWebName)
# totalCount
totalCount1 <- df_allShows$sourceWebName == "全國藝文活動資訊系統"
totalCount1 <- as.numeric(totalCount1)
totalCount <- sum(totalCount1)
class(totalCount)
totalCount
# totalCount
totalCount1 <- df_allShows$sourceWebName == "全國藝文活動資訊系統"
totalCount1 <- as.numeric(totalCount1)
totalCount <- sum(totalCount1)
class(totalCount)
totalCount
